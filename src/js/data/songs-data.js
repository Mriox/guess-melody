import getRandomItem, {getRandomInt} from '../utils/get-random-item';

class SongsData {
  constructor() {
    this.songs = [
      {
        artist: `Locash`,
        name: `One Big Country Song`,
        value: `1`,
        id: `1`,
        img: `http://placehold.it/134x134`,
        mp3: `/mp3/allo.mp3`,
        genre: `Country`
      },
      {
        artist: `Crazy Town`,
        name: `Butterfly`,
        value: `2`,
        id: `2`,
        img: `/img/default.png`,
        mp3: `/mp3/Butterfly.mp3`,
        genre: `Rock`
      },
      {
        artist: `Quincas Moreira`,
        name: `Firefly`,
        value: `3`,
        id: `3`,
        img: `https://is4-ssl.mzstatic.com/image/thumb/Music114/v4/89/4c/6e/894c6e28-a496-1896-e03f-e94573aa0615/artwork.jpg/600x600bf.png`,
        mp3: `/mp3/Firefly.mp3`,
        genre: `Electronic`
      },
      {
        artist: `Jingle Punks`,
        name: `Lucky Day`,
        value: `4`,
        id: `4`,
        img: `https://i.vimeocdn.com/portrait/992615_300x300`,
        mp3: `/mp3/Lucky_Day.mp3`,
        genre: `Pop`
      },
      {
        artist: `Riot`,
        name: `Level Plane`,
        value: `5`,
        id: `5`,
        img: `https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQCzEQ57k_T_MA_C45r2PlOebpruc3rBKwUQQ&usqp=CAU`,
        mp3: `/mp3/Level_Plane.mp3`,
        genre: `R&B`
      },
      {
        artist: `Audionautix`,
        name: `Travel Light`,
        value: `6`,
        id: `6`,
        img: `http://4.bp.blogspot.com/-kft9qu5ET6U/VPFUBi9W-MI/AAAAAAAACYM/UxXilXKYwOc/s1600/audionautix%2BHalf%2BSize.jpg`,
        mp3: `/mp3/Travel_Light.mp3`,
        genre: `Country`
      },
      {
        artist: `Jingle Punks`,
        name: `In the Land of Rhinoplasty`,
        value: `7`,
        id: `7`,
        img: `https://cdn.vor.us/event/345350/og/ba12952e95b9457d8d97019dd23ef01e.image!jpeg.22004.jpg.Untitled-4.jpg`,
        mp3: `/mp3/In_the_Land_of_Rhinoplasty.mp3`,
        genre: `Rock`
      },
      {
        artist: `Kevin MacLeod`,
        name: `Long Stroll`,
        value: `8`,
        id: `8`,
        img: `https://yt3.ggpht.com/-fkDeGauT7Co/AAAAAAAAAAI/AAAAAAAAAAA/dkF5ZKkrxRo/s900-c-k-no-mo-rj-c0xffffff/photo.jpg`,
        mp3: `/mp3/Long_Stroll.mp3`,
        genre: `Jazz`
      }
    ];

    this.questions = new Map([
      [`Выберите инди-рок треки`, `Rock`],
      [`Выберите джазовые треки`, `Jazz`],
      [`Выберите кантри треки`, `Country`],
      [`Выберите треки стиля R&B`, `R&B`],
      [`Выберите музыку электро`, `Electronic`],
    ]);
  }

  getRandomSongs(quantity, genre) {
    let someSongs = new Set();
    while (someSongs.size < quantity) {
      someSongs.add(getRandomItem(this.songs));
    }
    someSongs = [...someSongs];

    if (genre) {
      let isGenreTrue = someSongs.some((song) => song.genre === genre);
      if (!isGenreTrue) { // если в список не попала песня нужного жанра, добавляем
        let genreSongs = this.songs.filter((song) => song.genre === genre);
        let randomSong = getRandomItem(genreSongs);
        someSongs.splice(getRandomInt(someSongs.length - 1), 1, randomSong);
      }
    }
    return someSongs;
  }

  getUniqueSong(songs) {
    return getRandomItem(songs);
  }

  getRandomQuestion() {
    return getRandomItem([...this.questions]);
  }
}

let songsData = new SongsData();
export default songsData;
